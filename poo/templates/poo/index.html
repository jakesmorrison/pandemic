<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Just Pooped</title>
    <!-- CSS -->
    <link href="{% static 'poo/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'poo/css/grayscale.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'poo/css/style.css' %}" rel="stylesheet" type="text/css" />

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">

</head>
<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
    <!-- jQuery -->
    <script src=" {% static 'poo/js/jquery.min.js' %}" rel="stylesheet"></script>
    <script src=" {% static 'poo/js/bootstrap.min.js' %}" rel="stylesheet"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src=" {% static 'poo/js/grayscale.js' %}" rel="stylesheet"></script>


    <!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    Menu <i class="fa fa-bars"></i>
                </button>
                <a style="background-color: rgba(0, 0, 0, 0.55); border-radius: 8px;" class="navbar-brand page-scroll" href="#page-top">
                    <i class="fa fa-play-circle"></i> <span class="light">Just</span> Pooped
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a style="background-color: rgba(0, 0, 0, 0.55); border-radius: 8px; margin-right: 20px;" class="page-scroll" href="#about">Historic Data</a>
                    </li>
                    <li>
                        <a style="background-color: rgba(0, 0, 0, 0.55); border-radius: 8px;" class="page-scroll" href="#download">Stool Scale</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Intro Header -->
    <header class="intro">
        <div class="intro-body">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <button class="main-button" type="button" class="btn btn-primary" onclick="submitData()"></button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <label class="intro-text"></label>
                        <div class="form-group">
                          <label for="sel1">Name</label>
                          <select class="form-control" id="sel1">
                            <option>Jake</option>
                            <option>Joie</option>
                          </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div style="margin-top: 19px;" class="form-group">
                          <label for="loc">Location</label>
                          <input type="text" class="form-control" id="loc">
                        </div>
                    </div>
                    <div style="margin-top: 30px;" class="col-md-3">
                        <form id="myForm">
                            <div class="radio">
                              <label><input id="radio1" type="radio" checked="checked" name="optradio" value="Poo" onchange="radioChange()">Poo</label>
                            </div>
                            <div class="radio">
                              <label><input id="radio2" type="radio" name="optradio" value="Pee" onchange="radioChange()">Pee</label>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-3">
                        <label class="intro-text"></label>
                        <div class="form-group">
                          <label for="sel1">Type</label>
                          <select class="form-control" id="pee_poo">
                          </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- About Section -->
    <section id="about" class="container content-section text-center">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2">
                <h2>Poo Data</h2>
                <p>Poo</p>
                <p>Data</p>
                <p>Here</p>
            </div>
        </div>
    </section>

    <!-- Download Section -->
    <section id="download" class="content-section text-center">
        <div class="download-section">
            <div class="container">
                <div class="col-lg-8 col-lg-offset-2">
                    <h2>Bristol Stool Chart</h2>
                </div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <div id="map"></div>

    <script>
    $( document ).ready(function() {
        $('.main-button').html('<h1 class="brand-heading">I Pooped</h1>');

        if($('input[id=radio1]:checked').length > 0) {
            $('#pee_poo').html('{% for i in loop_times %}<option>Type {{i}}</option>{% endfor %}');
        }
    });

    function radioChange(){
         if($('input[id=radio1]:checked').length > 0) {
                $('#pee_poo').html('{% for i in loop_times %}<option>Type {{i}}</option>{% endfor %}');
                $('.main-button').html('<h1 class="brand-heading">I Pooped</h1>');
                $(".main-button").css("background-color", "rgba(213, 51, 51, 0.55)");
         }

         if($('input[id=radio2]:checked').length > 0) {
                $('#pee_poo').html('<option>NA</option>');
                $('.main-button').html('<h1 class="brand-heading">I Peed</h1>');
                $(".main-button").css("background-color", "rgba(211, 213, 51, 0.55)");
         }
     }

    function submitData(){
        url = "{% url 'poo:add_data' %}";
        data = {
            'name': $('#sel1').find(":selected").text(),
            'location': $('#loc').val(),
            "peepoo": $('input[name=optradio]:checked').val(),
            "type": $('#pee_poo').find(":selected").text()
            };
        $.ajax({
          type: "GET",
          url: url,
          data: data,
          success: function (msg) {
            $('.main-button').append('<p>Bathroom data added!</p>');
          }
        });
    }

    $(document).on('click','.navbar-collapse.in',function(e) {
        if( $(e.target).is('a') ) {
            $(this).collapse('hide');
        }
    });
    </script>

</body>
</html>